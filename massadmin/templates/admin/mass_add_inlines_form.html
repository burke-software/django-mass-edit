{% extends "admin/base_site.html" %}
{% load i18n admin_modify %}
{% load truncchar %}
{% load static %}

{% block extrahead %}{{ block.super }}
<script src="{% static 'js/verify_checked.js' %}"></script>
<script type="text/javascript">document.getElementById("{{ adminform.first_field.auto_id }}").focus();</script>
{% endblock %}

{% block breadcrumbs %}{% if not is_popup %}
<div id="breadcrumbs" class="breadcrumbs">
    <a href="../../../">{% trans "Home" %}</a> &rsaquo;
    <a href="../../">{{ app_label|capfirst|escape }}</a> &rsaquo; 
    {% if has_change_permission %}<a href="../../{{ opts.object_name.lower }}/">{{ opts.verbose_name_plural|capfirst }}</a>{% else %}{{ opts.verbose_name_plural|capfirst }}{% endif %} &rsaquo; 
    {% if add %}{% trans "Add" %} {{ opts.verbose_name }}{% else %}{{ object_ids|truncchar:50 }}{% endif %}
</div>
{% endif %}{% endblock %}

{% block content %}<div id="content-main">
<form onsubmit="return verify_checked()" {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.model_name }}_form">{% csrf_token %}
<div>
<input type="hidden" name ="_changelist_filters" value="{{ request.META.HTTP_REFERER }}" />
    {% if is_popup %}<input type="hidden" name="_popup" value="1" />{% endif %}
    {% if save_on_top %}{% include "admin/save_only_submit_line.html" %}{% endif %}
    {% if errors %}
    <p class="errornote">
    {% blocktrans count errors|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
    </p>
    <ul class="errorlist">{% for error in inline_admin_formset.form.non_field_errors %}<li>{{ error }}</li>{% endfor %}</ul>
{% endif %}

{% for inline_admin_formset in inline_admin_formsets %}
    {% include "admin/includes/mass_inline.html" with add_inline=True change_inline=False %}
{% endfor %}

{% include "admin/save_only_submit_line.html" %}

{# JavaScript for prepopulated fields #}
{% prepopulated_fields_js %}

</div></form></div>
{% endblock %}